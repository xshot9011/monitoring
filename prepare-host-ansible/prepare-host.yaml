---
- name: Prepare host
  host: localhost  # all
  become: true

  vars_prompt:
  - name: password
    prompt: "Enter password: "
    private: no

  tasks:
  - name: generate hash pass
      delegate_to: localhost
      command:  python -c "from passlib.hash import sha512_crypt; import getpass; print sha512_crypt.encrypt('{{password}}')"
      register: hash
  - debug:
      var: hash.stdout
  #- name: update password
  #  user:
  #    name: xxxxxx
  #    password: '{{hash.stdout}}'
  #  become: yes
